{"version":3,"file":"/home/elvis/git/newbles-client/server/customer/index.ts","sources":["/home/elvis/git/newbles-client/server/customer/index.ts"],"names":[],"mappings":"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","sourcesContent":["((module) => {\n    const express = require('express');\n    const app = express();\n\n    const investProductLongTermData = require('./data/invest-product');\n    const globals = require('../global');\n    let plan = 0;\n\n    app.post('/customer', (req, res) => {\n        if (req.body.dni === '99999999') {\n            const data = {\n                'code': 'CU01',\n                'name': 'CustomerNotFoundByDni',\n                'message': 'Customer was not found with the following dni 10203040'\n            };\n            res.status(500)\n                .json(globals.primeResponse(data, 500));\n        } else if (req.body.dni === '00000000') {\n            const data = {\n                'message': 'Internal server error'\n            };\n            res.status(500)\n                .json(data);\n        } else {\n            res.header(globals.headers.xIterationId, globals.newUUID());\n            const data = {\n                dni: '69696969',\n                id: '910a8964-3aba-4026-afea-4550fb74c76b',\n                journey: 'GUIDED',\n                name: 'ivan'\n            };\n            res.send(globals.primeResponse(data));\n        }\n    });\n\n    app.post('/customer/:idCustomer/goal', globals.validateXIterationUser, (req, res) => {\n        const data = {};\n        res.json(globals.primeResponse(data));\n    });\n\n    app.post('/customer/:idCustomer/profiling', globals.validateXIterationUser, (req, res) => {\n        const data = {\n            profile: 'SAFETYLOVER'\n        };\n        res.json(globals.primeResponse(data));\n    });\n\n    app.delete('/customer/:idCustomer/profiling', globals.validateXIterationUser, (req, res) => {\n        const data = {};\n        res.json(globals.primeResponse(data));\n    });\n\n    app.put('/customer/:idCustomer/profiling/:profileRisk', globals.validateXIterationUser, (req, res) => {\n        const data = {};\n        res.json(globals.primeResponse(data));\n    });\n\n    app.get('/customer/:idCustomer/investment-product', globals.validateXIterationUser, (req, res) => {\n        if (plan === 0) {\n            res.json(require('./data/minimum.json'));\n            return;\n        }\n\n        if (plan === 1) {\n            res.json(require('./data/medium.json'));\n            return;\n        }\n\n        if (plan === 2) {\n            res.json(require('./data/maximum.json'));\n            return;\n        }\n\n        if (plan === 3) {\n            res.json(require('./data/one-custom-short-term.json'));\n            return;\n        }\n\n        if (plan === 4) {\n            res.json(require('./data/maximum-4k.json'));\n            return;\n        }\n\n        if (plan === 5) {\n            res.json(require('./data/maximum-2k.json'));\n            return;\n        }\n    });\n\n    app.post('/customer/:idCustomer/investment-product', globals.validateXIterationUser, (req, res) => {\n        if (!req.body.id_plan || !req.body.id_product) {\n            res.status(500)\n                .json(globals.primeResponse({}, 500));\n        } else {\n            if (plan === 0) {\n                res.json(require('./data/one-minimum.json'));\n                return;\n            }\n\n            if (plan === 1) {\n                res.json(require('./data/one-medium.json'));\n                return;\n            }\n\n            if (plan === 2) {\n                res.json(require('./data/one-maximum.json'));\n                return;\n            }\n\n            if (plan === 3) {\n                res.json(require('./data/one-custom-short-term.json'));\n                return;\n            }\n\n            if (plan === 4) {\n                res.json(require('./data/one-maximum-4k.json'));\n                return;\n            }\n\n            if (plan === 5) {\n                res.json(require('./data/one-maximum-2k.json'));\n                return;\n            }\n        }\n    });\n\n    app.post('/customer/:idCustomer/preferences', globals.validateXIterationUser, (req, res) => {\n        plan = 0;\n\n        switch (true) {\n            case req.body.time >= 3 && req.body.period === 'YEAR' && req.body.amount >= 10000:\n                plan = 2;\n                break;\n            case ((req.body.time >= 6 && req.body.time < 33 && req.body.period === 'MONTH') ||\n                (req.body.time < 3 && req.body.period === 'YEAR')):\n                plan = 1;\n                break;\n            case (req.body.time < 6 && req.body.period === 'MONTH'):\n                plan = 0;\n                break;\n            case ((req.body.time === 33 || req.body.time === 34 || req.body.time === 35) && req.body.period === 'MONTH'):\n                plan = 3;\n                break;\n            case ((req.body.time >= 3 && req.body.period === 'YEAR' && req.body.amount >= 4000)):\n                plan = 4;\n                break;\n            case (req.body.time >= 3 && req.body.period === 'YEAR' && req.body.amount >= 2000):\n                plan = 5;\n                break;\n        }\n        const data = {};\n        res.json(globals.primeResponse(data));\n    });\n\n    app.post('/customer/:idCustomer/investment-product/:idCustomerInvestment/rating', globals.validateXIterationUser, (req, res) => {\n        res.status(204)\n            .json(globals.primeResponse({}));\n    });\n\n    app.post('/customer/:idCustomer/investment-product/:idCustomerInvestment/mailing', globals.validateXIterationUser, (req, res) => {\n        res.status(204)\n            .json(globals.primeResponse({}));\n    });\n\n    app.post('/customer/:idCustomer/terms-conditions', globals.validateXIterationUser, (req, res) => {\n        const status = req.body.agreed ? 204 : 500;\n        res.status(status)\n            .json(globals.primeResponse({}, status));\n    });\n\n    module.exports = app;\n})(module);\n"]}