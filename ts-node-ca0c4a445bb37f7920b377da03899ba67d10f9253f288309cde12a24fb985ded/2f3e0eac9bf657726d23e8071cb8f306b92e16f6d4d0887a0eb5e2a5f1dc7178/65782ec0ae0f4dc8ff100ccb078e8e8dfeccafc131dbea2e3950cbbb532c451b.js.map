{"version":3,"file":"/home/elvis/git/newbles-client/server/global.ts","sources":["/home/elvis/git/newbles-client/server/global.ts"],"names":[],"mappings":"AAAA,CAAC,UAAC,MAAM;IACJ,IAAM,IAAI,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC;IAEhC,IAAI,KAAK,GAAG,EAAE,CAAC;IACf,IAAM,YAAY,GAAG,gBAAgB,CAAC;IACtC,IAAM,OAAO,GAAG;QACZ,KAAK,GAAG,IAAI,EAAE,CAAC;QACf,MAAM,CAAC,KAAK,CAAC;IACjB,CAAC,CAAC;IACF,IAAM,sBAAsB,GAAG,UAAC,GAAG,EAAE,GAAG,EAAE,IAAI;QAC1C,EAAE,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;YAC3B,IAAI,EAAE,CAAC;QACX,CAAC;QACD,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC;aACV,GAAG,EAAE,CAAC;IACf,CAAC,CAAC;IACF,IAAM,aAAa,GAAG,UAAC,QAAa,EAAE,UAAgB;QAAhB,2BAAA,EAAA,gBAAgB;QAClD,MAAM,CAAC;YACH,OAAO,EAAE,UAAU,KAAK,GAAG;YAC3B,QAAQ,UAAA;YACR,MAAM,EAAE,EAAE;SACb,CAAC;IACN,CAAC,CAAC;IAEF,IAAM,OAAO,GAAG;QACZ,OAAO,SAAA;QACP,OAAO,EAAE;YACL,YAAY,cAAA;SACf;QACD,sBAAsB,wBAAA;QACtB,aAAa,eAAA;KAChB,CAAC;IAEF,MAAM,CAAC,OAAO,GAAG,OAAO,CAAC;AAC7B,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC","sourcesContent":["((module) => {\n    const uuid = require('uuid/v4');\n\n    let _uuid = '';\n    const xIterationId = 'X-ITERATION-ID';\n    const newUUID = () => {\n        _uuid = uuid();\n        return _uuid;\n    };\n    const validateXIterationUser = (req, res, next) => {\n        if (req.header(xIterationId)) {\n            next();\n        }\n        res.status(500)\n            .end();\n    };\n    const primeResponse = (response: any, statusCode = 200) => {\n        return {\n            success: statusCode !== 500,\n            response,\n            errors: []\n        };\n    };\n\n    const globals = {\n        newUUID,\n        headers: {\n            xIterationId\n        },\n        validateXIterationUser,\n        primeResponse\n    };\n\n    module.exports = globals;\n})(module);\n"]}