{"version":3,"file":"/home/elvis/git/newbles-client/server/index.ts","sources":["/home/elvis/git/newbles-client/server/index.ts"],"names":[],"mappings":"AAAA,CAAC;IACG,IAAM,OAAO,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC;IACnC,IAAM,UAAU,GAAG,OAAO,CAAC,aAAa,CAAC,CAAC;IAC1C,IAAM,GAAG,GAAG,OAAO,EAAE,CAAC;IAEtB,IAAM,WAAW,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;IACxC,IAAM,aAAa,GAAG,OAAO,CAAC,qBAAqB,CAAC,CAAC;IACrD,IAAM,oBAAoB,GAAG,OAAO,CAAC,mBAAmB,CAAC,CAAC;IAC1D,IAAM,mBAAmB,GAAG,OAAO,CAAC,kBAAkB,CAAC,CAAC;IACxD,IAAM,cAAc,GAAG,OAAO,CAAC,aAAa,CAAC,CAAC;IAC9C,IAAM,oBAAoB,GAAG,OAAO,CAAC,oBAAoB,CAAC,CAAC;IAC3D,IAAM,eAAe,GAAG,OAAO,CAAC,cAAc,CAAC,CAAC;IAChD,IAAM,uBAAuB,GAAG,OAAO,CAAC,uBAAuB,CAAC,CAAC;IACjE,IAAM,aAAa,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC;IAC5C,IAAM,cAAc,GAAG,OAAO,CAAC,aAAa,CAAC,CAAC;IAC9C,IAAM,eAAe,GAAG,OAAO,CAAC,cAAc,CAAC,CAAC;IAChD,IAAM,YAAY,GAAG,OAAO,CAAC,WAAW,CAAC,CAAC;IAE1C,IAAM,YAAY,GAAG,OAAO,CAAC,iBAAiB,CAAC,CAAC;IAEhD,IAAM,OAAO,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;IACpC,IAAM,MAAM,GAAG,MAAM,CAAC;IACtB,IAAM,aAAa,GAAG;QAClB,IAAM,MAAM,GAAG,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;QAC1B,IAAM,MAAM,GAAG,IAAI,CAAC,MAAM,EAAE,GAAG,EAAE,CAAC;QAClC,IAAI,GAAG,GAAG,CAAC,CAAC;QACZ,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YACzB,GAAG,GAAG,CAAC,CAAC;QACZ,CAAC;QACD,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;IACvB,CAAC,CAAC;IAEF,GAAG,CAAC,GAAG,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC,CAAC;IAC3B,GAAG,CAAC,GAAG,CAAC,UAAC,GAAG,EAAE,GAAG,EAAE,IAAI;QACnB,IAAM,cAAc,GAAG,CAAC,uBAAuB,EAAE,uBAAuB,CAAC,CAAC;QAC1E,IAAM,MAAM,GAAG,GAAG,CAAC,OAAO,CAAC,MAAM,CAAC;QAClC,EAAE,CAAC,CAAC,cAAc,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;YACtC,GAAG,CAAC,SAAS,CAAC,6BAA6B,EAAE,MAAM,CAAC,CAAC;QACzD,CAAC;QACD,GAAG,CAAC,MAAM,CAAC,8BAA8B,EAAE,6FAA6F,CAAC,CAAC;QAC1I,GAAG,CAAC,MAAM,CAAC,+BAA+B,EAAE,6CAA6C,CAAC,CAAC;QAC3F,GAAG,CAAC,MAAM,CAAC,8BAA8B,EAAE,wBAAwB,CAAC,CAAC;QACrE,IAAI,EAAE,CAAC;IACX,CAAC,CAAC,CAAC;IAEH,GAAG,CAAC,GAAG,CAAC,GAAG,EAAE,UAAC,GAAG,EAAE,GAAG,EAAE,IAAI,IAAK,OAAA,UAAU,CAAC,cAAM,OAAA,IAAI,EAAE,EAAN,CAAM,EAAE,CAAC,CAAC,EAA3B,CAA2B,CAAC,CAAC;IAE9D,GAAG,CAAC,GAAG,CAAC,MAAM,EAAE,WAAW,CAAC,CAAC;IAC7B,GAAG,CAAC,GAAG,CAAC,MAAM,EAAE,aAAa,CAAC,CAAC;IAC/B,GAAG,CAAC,GAAG,CAAC,MAAM,EAAE,oBAAoB,CAAC,CAAC;IACtC,GAAG,CAAC,GAAG,CAAC,MAAM,EAAE,mBAAmB,CAAC,CAAC;IACrC,GAAG,CAAC,GAAG,CAAC,MAAM,EAAE,cAAc,CAAC,CAAC;IAChC,GAAG,CAAC,GAAG,CAAC,MAAM,EAAE,oBAAoB,CAAC,CAAC;IACtC,GAAG,CAAC,GAAG,CAAC,MAAM,EAAE,eAAe,CAAC,CAAC;IACjC,GAAG,CAAC,GAAG,CAAC,MAAM,EAAE,uBAAuB,CAAC,CAAC;IACzC,GAAG,CAAC,GAAG,CAAC,MAAM,EAAE,aAAa,CAAC,CAAC;IAC/B,GAAG,CAAC,GAAG,CAAC,MAAM,EAAE,cAAc,CAAC,CAAC;IAChC,GAAG,CAAC,GAAG,CAAC,MAAM,EAAE,eAAe,CAAC,CAAC;IACjC,GAAG,CAAC,GAAG,CAAC,MAAM,EAAE,YAAY,CAAC,CAAC;IAE9B,GAAG,CAAC,GAAG,CAAC,GAAG,EAAE,UAAC,GAAG,EAAE,GAAG;QAClB,GAAG,CAAC,IAAI,CAAC;YACL,KAAK,EAAE,kBAAkB;SAC5B,CAAC,CAAC;IACP,CAAC,CAAC,CAAC;IAEH,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;AACrB,CAAC,CAAC,EAAE,CAAC","sourcesContent":["(() => {\n    const express = require('express');\n    const bodyParser = require('body-parser');\n    const app = express();\n\n    const adminModule = require('./admin/');\n    const adviserModule = require('./customer/adviser/');\n    const authenticationModule = require('./authentication/');\n    const configurationModule = require('./configuration/');\n    const customerModule = require('./customer/');\n    const customerStatusModule = require('./customer-status/');\n    const dashboardModule = require('./dashboard/');\n    const investmentProductModule = require('./investment-product/');\n    const productModule = require('./product/');\n    const purchaseModule = require('./purchase/');\n    const simulatorModule = require('./simulator/');\n    const surveyModule = require('./survey/');\n\n    const atrapaniebla = require('./atrapaniebla/');\n\n    const globals = require('./global');\n    const prefix = '/api';\n    const getStatusCode = () => {\n        const status = [200, 500];\n        const random = Math.random() * 10;\n        let pos = 1;\n        if (Math.floor(random) < 7) {\n            pos = 0;\n        }\n        return status[pos];\n    };\n\n    app.use(bodyParser.json());\n    app.use((req, res, next) => {\n        const allowedOrigins = ['http://localhost:3000', 'http://localhost:4200'];\n        const origin = req.headers.origin;\n        if (allowedOrigins.indexOf(origin) > -1) {\n            res.setHeader('Access-Control-Allow-Origin', origin);\n        }\n        res.header('Access-Control-Allow-Headers', 'X-KEYBOARD, Content-type, X-TOKEN-KEYBOARD-ENCRYPTED-6-PIN, X-ITERATION-ID, X-CUSTOMER-CODE');\n        res.header('Access-Control-Expose-Headers', 'X-KEYBOARD, X-ITERATION-ID, X-CUSTOMER-CODE');\n        res.header('Access-Control-Allow-Methods', 'GET, PUT, POST, DELETE');\n        next();\n    });\n\n    app.all('*', (req, res, next) => setTimeout(() => next(), 0));\n\n    app.use(prefix, adminModule);\n    app.use(prefix, adviserModule);\n    app.use(prefix, authenticationModule);\n    app.use(prefix, configurationModule);\n    app.use(prefix, customerModule);\n    app.use(prefix, customerStatusModule);\n    app.use(prefix, dashboardModule);\n    app.use(prefix, investmentProductModule);\n    app.use(prefix, productModule);\n    app.use(prefix, purchaseModule);\n    app.use(prefix, simulatorModule);\n    app.use(prefix, surveyModule);\n\n    app.get('/', (req, res) => {\n        res.send({\n            title: 'Prime (frontend)'\n        });\n    });\n\n    app.listen(6969);\n})();\n"]}